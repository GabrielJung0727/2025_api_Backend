# 🧮 진단 테스트 산술식 계산 로직

## 📊 핵심 산술식

### **학습 수준 지표 = 총 획득 점수 ÷ 최대 가능 점수**

```
Learning Level = Σ(정답 문제의 난이도 점수) ÷ Σ(모든 문제의 난이도 점수)
```

## 🎯 난이도별 점수 체계

| 난이도 레벨 | 점수 | 설명 |
|------------|------|------|
| 1 (매우 쉬움) | 1.0점 | 기초 개념 문제 |
| 2 (쉬움) | 2.0점 | 기본 응용 문제 |
| 3 (보통) | 3.0점 | 중급 응용 문제 |
| 4 (어려움) | 4.0점 | 고급 응용 문제 |
| 5 (매우 어려움) | 5.0점 | 전문가 수준 문제 |

## 💡 계산 예시

### 30문항 진단 테스트 (난이도별 균등 분배)
- **쉬움 문제 6개**: 각 2.0점 × 6 = 12.0점
- **보통 문제 6개**: 각 3.0점 × 6 = 18.0점  
- **어려움 문제 6개**: 각 4.0점 × 6 = 24.0점
- **매우 어려움 문제 6개**: 각 5.0점 × 6 = 30.0점
- **기타 문제 6개**: 각 1.0점 × 6 = 6.0점

**최대 가능 점수**: 12.0 + 18.0 + 24.0 + 30.0 + 6.0 = **90.0점**

### 학생 A의 답안 결과
- ✅ 쉬움 문제: 5개 정답 → 5 × 2.0 = **10.0점**
- ✅ 보통 문제: 4개 정답 → 4 × 3.0 = **12.0점**  
- ✅ 어려움 문제: 2개 정답 → 2 × 4.0 = **8.0점**
- ✅ 매우 어려움 문제: 1개 정답 → 1 × 5.0 = **5.0점**
- ✅ 기타 문제: 6개 정답 → 6 × 1.0 = **6.0점**

**총 획득 점수**: 10.0 + 12.0 + 8.0 + 5.0 + 6.0 = **41.0점**

**학습 수준 지표**: 41.0 ÷ 90.0 = **0.456** (45.6%)

## 📈 세부 분석 로직

### 1. 난이도별 분석
```python
for 난이도 in [쉬움, 보통, 어려움, 매우어려움]:
    정답률 = 해당_난이도_정답수 ÷ 해당_난이도_총문제수
    획득점수율 = 해당_난이도_획득점수 ÷ 해당_난이도_최대점수
```

### 2. 과목별 분석 (향후 확장)
```python
for 과목 in [자료구조, 알고리즘, 데이터베이스, ...]:
    과목별_정답률 = 과목_정답수 ÷ 과목_총문제수
    과목별_점수율 = 과목_획득점수 ÷ 과목_최대점수
```

## 🎯 학습 수준 구간별 피드백

| 학습 수준 | 구간 | 피드백 메시지 | 추천 액션 |
|----------|------|---------------|-----------|
| 🌟 우수 | 0.8 ~ 1.0 | "뛰어난 실력입니다!" | 고급 문제 도전 |
| 🎯 양호 | 0.6 ~ 0.8 | "양호한 수준입니다" | 약점 영역 집중 학습 |
| 📚 보통 | 0.4 ~ 0.6 | "기초가 갖추어져 있습니다" | 꾸준한 학습 필요 |
| 📝 기초 | 0.0 ~ 0.4 | "기초부터 차근차근" | 기본기 탄탄히 하기 |

## 🔄 학습 진척도 추적

### 이전 진단과의 비교
```python
진척도_점수 = 현재_학습수준 - 이전_학습수준
진척도_퍼센트 = (진척도_점수 ÷ 이전_학습수준) × 100

# 예시
이전_진단: 0.40 (40%)
현재_진단: 0.456 (45.6%)
진척도: +0.056 (+5.6%p)
향상률: +14% ((0.056 ÷ 0.40) × 100)
```

## 🎨 결과 화면 표시 예시

```
📊 진단 결과 상세 분석

🎯 종합 학습 수준: 45.6% (0.456)
📈 이전 대비 향상: +5.6%p (+14% ↗️)

📋 산술식 계산 과정:
┌─────────────────────────────────┐
│ 총 획득 점수: 41.0점            │
│ 최대 가능 점수: 90.0점          │
│ 학습 수준 = 41.0 ÷ 90.0 = 0.456│
└─────────────────────────────────┘

📊 난이도별 성과:
• 쉬움(2.0점):    ████████▓░ 83% (5/6)
• 보통(3.0점):    ██████▓░░░ 67% (4/6)  
• 어려움(4.0점):  ███▓░░░░░░ 33% (2/6)
• 매우어려움(5.0점): █▓░░░░░░░░ 17% (1/6)

💪 강점: 기초 문제, 기본 응용
📝 약점: 고급 응용, 전문가 수준

🎯 맞춤 학습 추천:
1. 어려운 문제 유형 집중 연습
2. 고급 알고리즘 개념 학습
3. 실전 문제 풀이 늘리기
```

## 🔧 백엔드 구현 확인

현재 `app/services/diagnosis_service.py`에서 구현된 로직:

✅ **완료된 기능**:
- 난이도별 점수 체계 (`_get_difficulty_score`)
- 총점 계산 및 학습 수준 산출
- 난이도별/과목별 세부 분석
- 피드백 메시지 생성
- 학습 진척도 추적

✅ **API 엔드포인트**:
- `POST /api/diagnosis/start` - 테스트 시작
- `POST /api/diagnosis/submit` - 답안 제출 & 자동 채점
- `GET /api/diagnosis/result/{session_id}` - 결과 조회
- `GET /api/diagnosis/history` - 진단 이력

🎉 **백엔드는 완전히 구현 완료!** 
이제 프론트엔드에서 위 API들을 연동하여 UI를 구현하면 됩니다! 